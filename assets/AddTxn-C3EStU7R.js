import{b as D,r as s,t as b,p as K,f as P,j as e,S as y}from"./index-DJO1BtTd.js";function B(){var t;return((t=crypto==null?void 0:crypto.randomUUID)==null?void 0:t.call(crypto))??`${Date.now()}-${Math.random()}`}function M(){const t=D(),i=s.useId(),o=s.useId(),d=s.useId(),r=s.useId(),c=s.useId(),u=s.useId(),[h,S]=s.useState(b()),[l,I]=s.useState("masuk"),[m,C]=s.useState("cash"),[p,x]=s.useState(""),[g,f]=s.useState(""),[j,w]=s.useState(!1),n=K(p),T=p?P(n):"",R=async a=>{if(a.preventDefault(),!n){await y.fire({icon:"warning",title:"Perhatian",text:"Nominal harus diisi"});return}t.add({id:B(),tanggal:h,tipe:l,nominal:n,keterangan:g.trim()||void 0,dihapus:!1,isPlanned:j,alokasi:m}),x(""),f(""),y.fire({icon:"success",title:"Berhasil",text:"Transaksi ditambahkan",timer:1500,showConfirmButton:!1})},A=a=>I(a.target.value),v=a=>x(a.target.value);return e.jsx("div",{className:"container",children:e.jsxs("form",{className:"card form-card",onSubmit:R,style:{display:"grid",gap:12},children:[e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-row-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:i,children:"Tanggal"}),e.jsx("input",{id:i,type:"date",value:h,max:b(),onChange:a=>S(a.target.value)})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:o,children:"Tipe"}),e.jsxs("select",{id:o,value:l,onChange:A,children:[e.jsx("option",{value:"masuk",children:"Masuk"}),e.jsx("option",{value:"keluar",children:"Keluar"})]})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:r,children:"Nominal"}),e.jsx("input",{id:r,inputMode:"numeric",placeholder:"Rp0",value:T,onChange:v,onBlur:v})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:d,children:"Alokasi"}),e.jsx("select",{id:d,value:m,onChange:a=>C(a.target.value),children:t.allocations.map(a=>{var N;const k=((N=t.byAccount(!1)[a.id])==null?void 0:N.sisa)||0,F=l==="keluar"&&n>0&&k<n;return e.jsxs("option",{value:a.id,disabled:F,children:[a.label,l==="keluar"&&n>0?` (Saldo: Rp${k.toLocaleString("id-ID")})`:""]},a.id)})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{htmlFor:c,children:"Keterangan"}),e.jsx("textarea",{id:c,rows:3,placeholder:"Catatan (opsional)",value:g,onChange:a=>f(a.target.value)})]}),e.jsx("div",{className:"field",style:{alignItems:"center"},children:e.jsx("div",{className:"field",children:e.jsxs("label",{htmlFor:u,style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"14px"},children:[e.jsx("input",{id:u,type:"checkbox",checked:j,onChange:a=>w(a.target.checked),style:{width:16,height:16,accentColor:"#2b6ef6"}}),"Akan datang"]})})})]}),e.jsx("button",{className:"primary",type:"submit",disabled:!n,children:"Simpan Transaksi"})]})})}export{M as default};
